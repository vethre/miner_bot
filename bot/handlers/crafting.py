from aiogram import Router, types
from aiogram.filters import Command
from bot.db import get_inventory, add_item, db

router = Router()

SMELT_INPUT_MAP: dict[str, str] = {
    "–∂–µ–ª–µ–∑–Ω–∞—è —Ä—É–¥–∞":  "iron",
    "–∂–µ–ª–µ–∑–æ":         "iron",
    "iron":           "iron",

    "–∫–∞–º–µ–Ω–Ω–∞—è —Ä—É–¥–∞":  "stone",
    "–∫–∞–º–µ–Ω—å":         "stone",
    "stone":          "stone",

    "–∑–æ–ª–æ—Ç–æ":         "gold",
    "gold":           "gold",

    "–∞–º–µ—Ç–∏—Å—Ç":        "amethyst",
    "–∞–º–µ—Ç–∏—Å—Ç–æ–≤–∞—è —Ä—É–¥–∞":"amethyst",
    "amethyst":       "amethyst",
    "—Ä—É–¥–∞ —ç–æ–Ω–∏—Ç–∞":"eonite_ore",
}

SMELT_RECIPES = {
    "iron":  {"in_qty": 3,  "out_key": "iron_ingot",  "out_name": "–ñ–µ–ª–µ–∑–Ω—ã–π c–ª–∏—Ç–æ–∫"},
    "stone": {"in_qty": 6, "out_key": "roundstone",   "out_name": "–ë—É–ª—ã–∂–Ω–∏–∫"},
    "gold":  {"in_qty": 2,  "out_key": "gold_ingot",   "out_name": "–ó–æ–ª–æ—Ç–æ–π —Å–ª–∏—Ç–æ–∫"},
    "amethyst":  {"in_qty": 2,  "out_key": "amethyst_ingot",  "out_name": "–ê–º–µ—Ç–∏—Å—Ç–æ–≤—ã–π —Å–ª–∏—Ç–æ–∫"},
    "eonite_ore":  {"in_qty": 2,  "out_key": "eonite_ingot",  "out_name": "–°–ª–∏—Ç–æ–∫ –≠–æ–Ω–∏—Ç–∞"},
}

CRAFT_RECIPES = {
    "–±—É–ª—ã–∂–Ω–∏–∫–æ–≤–∞—è –∫–∏—Ä–∫–∞": {
        "in": {"roundstone": 10, "wood_handle": 1},
        "out_key": "roundstone_pickaxe",
        "out_name": "üî® –ë—É–ª—ã–∂–Ω–∏–∫–æ–≤–∞—è –∫–∏—Ä–∫–∞"
    },
    "–∂–µ–ª–µ–∑–Ω–∞—è –∫–∏—Ä–∫–∞": {
        "in": {"iron_ingot": 8, "wood_handle": 1},
        "out_key": "iron_pickaxe",
        "out_name": "‚õèÔ∏è –ñ–µ–ª–µ–∑–Ω–∞—è –∫–∏—Ä–∫–∞"
    },
    "–∑–æ–ª–æ—Ç–∞—è –∫–∏—Ä–∫–∞": {
        "in": {"gold_ingot": 5, "wood_handle": 2},
        "out_key": "gold_pickaxe",
        "out_name": "‚ú® –ó–æ–ª–æ—Ç–∞—è –∫–∏—Ä–∫–∞"
    },
    "–∞–º–µ—Ç–∏—Å—Ç–æ–≤–∞—è –∫–∏—Ä–∫–∞": {
        "in": {"amethyst_ingot": 3, "wood_handle": 2},
        "out_key": "amethyst_pickaxe",
        "out_name": "‚ú® –ê–º–µ—Ç–∏—Å—Ç–æ–≤–∞—è –∫–∏—Ä–∫–∞",
    },
    "–∞–ª–º–∞–∑–Ω–∞—è –∫–∏—Ä–∫–∞": {
        "in": {"diamond": 3, "wood_handle": 4},
        "out_key": "diamond_pickaxe",
        "out_name": "üíé –ê–º–µ—Ç–∏—Å—Ç–æ–≤–∞—è –∫–∏—Ä–∫–∞",
    },
    "—Ä—É–¥–∞ —ç–æ–Ω–∏—Ç–∞": {
        "in": {"eonite_shard": 2},
        "out_key": "eonite_ore",
        "out_name": "üîÆ –†—É–¥–∞ –≠–æ–Ω–∏—Ç–∞",
    },
    "–∂–µ–ª–µ–∑–Ω–∞—è —Ä—É–∫–æ—è—Ç—å": {
        "in": {"wood_handle": 5, "iron_ingot": 5},
        "out_key": "iron_handle",
        "out_name": "üß≤ –ñ–µ–ª–µ–∑–Ω–∞—è —Ä—É–∫–æ—è—Ç—å",
    },
    "—Å—Ç–∞—Ä—à–∞—è —ç–æ–Ω–∏—Ç–æ–≤–∞—è –∫–∏—Ä–∫–∞": {
        "in": {"iron_handle": 1, "eonite_ingot": 3, "eonite_ore": 1},
        "out_key": "greater_eonite_pickaxe",
        "out_name": "üîÆ –°—Ç–∞—Ä—à–∞—è —ç–æ–Ω–∏—Ç–æ–≤–∞—è –∫–∏—Ä–∫–∞",
    },
}

PICKAXE_UPGRADES = {
    "reinforced_grip": {
        "name": "üõ†Ô∏è –£—Å–∏–ª–µ–Ω–Ω–∞—è —Ä—É–∫–æ—è—Ç—å",
        "materials": {"coal": 20, "wood_handle": 3},
    },
    "sharp_tip": {
        "name": "üõ†Ô∏è –û—Å—Ç—Ä—ã–π –Ω–∞–∫–æ–Ω–µ—á–Ω–∏–∫",
        "materials": {"coal": 50, "iron_ingot": 5},
    },
    "smoke_absorb_handle": {
        "name": "üõ†Ô∏è –£–≥–æ–ª—å–Ω–∞—è —Ä—É–∫–æ—è—Ç—å",
        "materials": {"coal": 80, "wood_handle": 3, "gold_ingot": 2},
    },
}
